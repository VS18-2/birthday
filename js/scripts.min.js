var c=document.getElementById("c"),ctx=c.getContext("2d"),cw=c.width=400,cx=cw/2,ch=c.height=400,cy=ch/2,frames=0,R=100,howMany=300,p=[],D=25,colors=[340,350,360,0,10,20];ctx.fillStyle="rgba(0,0,0,.05)";cx=[cw/2,cw/2+R,cw/2-R],cy=[ch/2,R,R];function Particle(){var t=2*Math.random()*Math.PI,a=~~(Math.random()*R),c=Math.floor(3*Math.random());this.x=cx[c]+a*Math.cos(t),this.y=cy[c]+a*Math.sin(t),this.ix=Math.random()*(Math.random()<.5?-1:1),this.iy=Math.random()*(Math.random()<.5?-1:1),this.hue=colors[Math.round(Math.random()*colors.length)+1]}function createParticle(){var t=new Particle;p.push(t)}for(var i=0;i<howMany/2;i++)createParticle();function Draw(){++frames%2==0&&p.length<howMany&&createParticle(),ctx.fillRect(0,0,cw,ch),thePath(R,1),ctx.strokeStyle="hsla(0,50%,20%,.3)",ctx.stroke();for(var t=0;t<p.length;t++)ctx.fillStyle=p[t].c,ctx.isPointInPath(p[t].x,p[t].y)?(p[t].x+=p[t].ix,p[t].y+=p[t].iy):(p[t].ix=-1*p[t].ix,p[t].iy=-1*p[t].iy,p[t].x+=p[t].ix,p[t].y+=p[t].iy);compare(),window.requestAnimationFrame(Draw)}function compare(){for(var t=0;t<p.length;t++)for(var a=p[t],c=t+1;c<p.length;c++){var r=p[c],e=distance(a,r);if(e<D){var n=(D-e)/D,o=a.hue;ctx.strokeStyle="hsla("+o+",87%, 44%,"+n+")",ctx.beginPath(),ctx.moveTo(a.x,a.y),ctx.lineTo(r.x,r.y),ctx.stroke()}}}function distance(t,a){var c=a.y-t.y,r=a.x-t.x;return Math.sqrt(c*c+r*r)}function thePath(t,a){ctx.beginPath(),ctx.moveTo(200,t),ctx.arc(300,t,t-a,Math.PI,.23*Math.PI),ctx.lineTo(200,350),ctx.arc(100,t,t-a,.77*Math.PI,0)}function randomIntFromInterval(t,a){return~~(Math.random()*(a-t+1)+t)}window.requestAnimationFrame(Draw);